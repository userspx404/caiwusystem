import{r as A,a as C,o as O,b as f,c as P,d as D,e as t,f as e,g as u,w as a,u as c,h,i as k,t as l,j as S,k as E,l as w,s as T,m as I}from"./index-CAVot8kD.js";import{_ as N,a as V,v as j,c as z,s as B,p as R,b}from"./_plugin-vue_export-helper-CZBBfLPA.js";const F={class:"dashboard",style:{padding:"20px"}},$={class:"page-header"},M={class:"page-title"},G={class:"stat-content"},q={class:"stat-icon",style:{background:"#409eff"}},H={class:"stat-info"},J={class:"stat-value"},K={class:"stat-content"},L={class:"stat-icon",style:{background:"#67c23a"}},Q={class:"stat-info"},U={class:"stat-value"},W={class:"stat-content"},X={class:"stat-icon",style:{background:"#e6a23c"}},Y={class:"stat-info"},Z={class:"stat-value"},ss={class:"stat-content"},ts={class:"stat-icon",style:{background:"#f56c6c"}},es={class:"stat-info"},as={class:"stat-value"},ns={style:{display:"flex","justify-content":"space-between","align-items":"center"}},os={class:"info-content"},ls={class:"info-item"},is={class:"info-value"},ds={class:"info-item"},rs={class:"info-value success"},cs={style:{display:"flex","justify-content":"space-between","align-items":"center"}},us={class:"info-content"},fs={class:"info-item"},_s={class:"info-value"},ps={class:"info-item"},vs={class:"info-value success"},gs={style:{display:"flex","justify-content":"space-between","align-items":"center"}},ms={class:"info-content"},ys={class:"info-item"},hs={class:"info-value warning"},ws={class:"info-item"},bs={class:"info-value success"},xs={class:"info-content"},As={class:"info-item"},Cs={class:"info-value"},Os={class:"info-item"},Ps={class:"info-value warning"},Ds={class:"info-item"},ks={class:"info-value success"},Ss={__name:"Dashboard",setup(Es){const o=A({accountsCount:0,vendorsCount:0,customersCount:0,transactionsCount:0,salesOrdersCount:0,purchaseOrdersCount:0,pendingSalesOrders:0,invoicedSalesOrders:0,pendingPurchaseOrders:0,receivedPurchaseOrders:0,pendingPayments:0,paidPayments:0,draftTransactions:0,auditedTransactions:0,postedTransactions:0}),y=C(!1),x=async()=>{y.value=!0;try{try{const n=await V.getAllAccounts();o.accountsCount=Array.isArray(n)?n.length:0}catch(n){console.error("获取科目统计失败:",n)}try{const n=await j.getAllVendors();o.vendorsCount=Array.isArray(n)?n.length:0}catch(n){console.error("获取供应商统计失败:",n)}try{const n=await z.getAllCustomers();o.customersCount=Array.isArray(n)?n.length:0}catch(n){console.error("获取客户统计失败:",n)}try{const n=await B.getAllSalesOrders();Array.isArray(n)&&(o.salesOrdersCount=n.length,o.pendingSalesOrders=n.filter(s=>s.status==="DRAFT"||s.status==="CONFIRMED").length,o.invoicedSalesOrders=n.filter(s=>s.status==="INVOICED").length)}catch(n){console.error("获取销售订单统计失败:",n)}try{const n=await R.getAllPurchaseOrders();Array.isArray(n)&&(o.purchaseOrdersCount=n.length,o.pendingPurchaseOrders=n.filter(s=>s.status==="DRAFT"||s.status==="CONFIRMED").length,o.receivedPurchaseOrders=n.filter(s=>s.status==="RECEIVED").length)}catch(n){console.error("获取采购订单统计失败:",n)}try{const n=await b.getPaymentsByStatus("PENDING"),s=await b.getPaymentsByStatus("PAID");o.pendingPayments=Array.isArray(n)?n.length:0,o.paidPayments=Array.isArray(s)?s.length:0}catch(n){console.error("获取付款申请统计失败:",n)}}catch(n){console.error("获取统计数据失败:",n)}finally{y.value=!1}},_=n=>{const s=new CustomEvent("navigate-tab",{detail:{tab:n}});window.dispatchEvent(s)};return O(()=>{console.log("Dashboard 组件已挂载"),x()}),(n,s)=>{const d=f("el-icon"),r=f("el-card"),i=f("el-col"),p=f("el-row"),g=f("el-tag"),v=f("el-button");return D(),P("div",F,[t("div",$,[t("h1",M,[e(d,{class:"title-icon"},{default:a(()=>[e(c(h))]),_:1}),s[4]||(s[4]=u(" 系统概览 ",-1))]),s[5]||(s[5]=t("p",{class:"page-subtitle"},"会计管理系统总览和关键指标",-1))]),e(p,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[e(i,{xs:24,sm:12,md:6,lg:6},{default:a(()=>[e(r,{class:"stat-card",shadow:"hover"},{default:a(()=>[t("div",G,[t("div",q,[e(d,null,{default:a(()=>[e(c(k))]),_:1})]),t("div",H,[s[6]||(s[6]=t("div",{class:"stat-label"},"科目总数",-1)),t("div",J,l(o.accountsCount||0),1)])])]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:6,lg:6},{default:a(()=>[e(r,{class:"stat-card",shadow:"hover"},{default:a(()=>[t("div",K,[t("div",L,[e(d,null,{default:a(()=>[e(c(S))]),_:1})]),t("div",Q,[s[7]||(s[7]=t("div",{class:"stat-label"},"供应商数",-1)),t("div",U,l(o.vendorsCount||0),1)])])]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:6,lg:6},{default:a(()=>[e(r,{class:"stat-card",shadow:"hover"},{default:a(()=>[t("div",W,[t("div",X,[e(d,null,{default:a(()=>[e(c(E))]),_:1})]),t("div",Y,[s[8]||(s[8]=t("div",{class:"stat-label"},"客户数",-1)),t("div",Z,l(o.customersCount||0),1)])])]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:6,lg:6},{default:a(()=>[e(r,{class:"stat-card",shadow:"hover"},{default:a(()=>[t("div",ss,[t("div",ts,[e(d,null,{default:a(()=>[e(c(w))]),_:1})]),t("div",es,[s[9]||(s[9]=t("div",{class:"stat-label"},"凭证总数",-1)),t("div",as,l(o.transactionsCount||0),1)])])]),_:1})]),_:1})]),_:1}),e(p,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[e(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[e(r,{class:"info-card",shadow:"hover"},{header:a(()=>[t("div",ns,[s[10]||(s[10]=t("span",{style:{"font-size":"16px","font-weight":"600"}},"销售订单",-1)),e(g,{type:"success"},{default:a(()=>[u(l(o.salesOrdersCount||0)+" 笔",1)]),_:1})])]),default:a(()=>[t("div",os,[t("div",ls,[s[11]||(s[11]=t("span",{class:"info-label"},"待发货订单：",-1)),t("span",is,l(o.pendingSalesOrders||0),1)]),t("div",ds,[s[12]||(s[12]=t("span",{class:"info-label"},"已开票订单：",-1)),t("span",rs,l(o.invoicedSalesOrders||0),1)])])]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[e(r,{class:"info-card",shadow:"hover"},{header:a(()=>[t("div",cs,[s[13]||(s[13]=t("span",{style:{"font-size":"16px","font-weight":"600"}},"采购订单",-1)),e(g,{type:"info"},{default:a(()=>[u(l(o.purchaseOrdersCount||0)+" 笔",1)]),_:1})])]),default:a(()=>[t("div",us,[t("div",fs,[s[14]||(s[14]=t("span",{class:"info-label"},"待收货订单：",-1)),t("span",_s,l(o.pendingPurchaseOrders||0),1)]),t("div",ps,[s[15]||(s[15]=t("span",{class:"info-label"},"已入库订单：",-1)),t("span",vs,l(o.receivedPurchaseOrders||0),1)])])]),_:1})]),_:1})]),_:1}),e(p,{gutter:20,style:{"margin-bottom":"20px"}},{default:a(()=>[e(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[e(r,{class:"info-card",shadow:"hover"},{header:a(()=>[t("div",gs,[s[16]||(s[16]=t("span",{style:{"font-size":"16px","font-weight":"600"}},"付款申请",-1)),e(g,{type:"warning"},{default:a(()=>[u(l(o.pendingPayments||0)+" 待处理",1)]),_:1})])]),default:a(()=>[t("div",ms,[t("div",ys,[s[17]||(s[17]=t("span",{class:"info-label"},"待执行：",-1)),t("span",hs,l(o.pendingPayments||0),1)]),t("div",ws,[s[18]||(s[18]=t("span",{class:"info-label"},"已支付：",-1)),t("span",bs,l(o.paidPayments||0),1)])])]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:12,lg:12},{default:a(()=>[e(r,{class:"info-card",shadow:"hover"},{header:a(()=>[...s[19]||(s[19]=[t("div",{style:{display:"flex","justify-content":"space-between","align-items":"center"}},[t("span",{style:{"font-size":"16px","font-weight":"600"}},"凭证状态")],-1)])]),default:a(()=>[t("div",xs,[t("div",As,[s[20]||(s[20]=t("span",{class:"info-label"},"草稿：",-1)),t("span",Cs,l(o.draftTransactions||0),1)]),t("div",Os,[s[21]||(s[21]=t("span",{class:"info-label"},"已审核：",-1)),t("span",Ps,l(o.auditedTransactions||0),1)]),t("div",Ds,[s[22]||(s[22]=t("span",{class:"info-label"},"已过账：",-1)),t("span",ks,l(o.postedTransactions||0),1)])])]),_:1})]),_:1})]),_:1}),e(r,{class:"action-card",shadow:"hover"},{header:a(()=>[...s[23]||(s[23]=[t("span",{style:{"font-size":"16px","font-weight":"600"}},"快速操作",-1)])]),default:a(()=>[e(p,{gutter:15},{default:a(()=>[e(i,{xs:24,sm:12,md:8,lg:6},{default:a(()=>[e(v,{type:"primary",onClick:s[0]||(s[0]=m=>_("transactions")),style:{width:"100%"}},{default:a(()=>[e(d,null,{default:a(()=>[e(c(w))]),_:1}),s[24]||(s[24]=u(" 新增凭证 ",-1))]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:8,lg:6},{default:a(()=>[e(v,{type:"success",onClick:s[1]||(s[1]=m=>_("sales-orders")),style:{width:"100%"}},{default:a(()=>[e(d,null,{default:a(()=>[e(c(T))]),_:1}),s[25]||(s[25]=u(" 新增销售订单 ",-1))]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:8,lg:6},{default:a(()=>[e(v,{type:"warning",onClick:s[2]||(s[2]=m=>_("purchase-orders")),style:{width:"100%"}},{default:a(()=>[e(d,null,{default:a(()=>[e(c(I))]),_:1}),s[26]||(s[26]=u(" 新增采购订单 ",-1))]),_:1})]),_:1}),e(i,{xs:24,sm:12,md:8,lg:6},{default:a(()=>[e(v,{type:"info",onClick:s[3]||(s[3]=m=>_("reports")),style:{width:"100%"}},{default:a(()=>[e(d,null,{default:a(()=>[e(c(h))]),_:1}),s[27]||(s[27]=u(" 生成财务报表 ",-1))]),_:1})]),_:1})]),_:1})]),_:1})])}}},Ns=N(Ss,[["__scopeId","data-v-4e152276"]]);export{Ns as default};
